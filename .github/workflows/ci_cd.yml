# name: CI/CD with Vercel

# on:
#   push:
#     branches:
#       - main

# jobs:
#   build:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout Repository
#         uses: actions/checkout@v2

#       - name: Set up Node.js
#         uses: actions/setup-node@v3
#         with:
#           node-version: 14

#       - name: Install Dependencies
#         run: npm install

#       - name: Build
#         run: npm run build

#   deploy:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Deploy to Vercel
#         uses: amondnet/vercel-action@v20
#         with:
#           vercelToken: 1vtMzDfCmcAfofwzdN6g9v0g
#           # vercelToken: ${{ secrets.VERCEL_TOKEN }}

#           name: Deployment Pipeline


# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     steps: 
#       - uses: actions/checkout@v2
#         with:
#           fetch-depth: 0
#       - uses: actions/setup-node@v2
#         with:
#           node-version: '18'
#       - name: Install dependencies
#         run: npm ci
#       #- name: Lint
#       #  run: npm run eslint
#       - name: Build
#         run: npm run build



# name: CI/CD with Vercel

# on:
#   push:
#     branches: [main]
#   pull_request:     
#     branches: [main]
#     types: [opened, synchronize]


# jobs:
#     deploy:
#     runs-on: ubuntu-latest
#     steps: 
#       - uses: actions/checkout@v2
#         with:
#           fetch-depth: 0
#       - uses: actions/setup-node@v2
#         with:
#           node-version: '18'
#       - name: Install dependencies
#         run: npm ci
#       - name: Build
#         run: npm run build
#       - name: Deploy to Vercel
#         uses: amondnet/vercel-action@v20
#         with:
#           vercelToken: 1vtMzDfCmcAfofwzdN6g9v0g
#           name: Maquinaria Pro
#           rollbackonhealthcheckfailed: true




  # deploy:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Deploy to Vercel
  #       uses: amondnet/vercel-action@v20
  #       with:
  #         vercelToken: 1vtMzDfCmcAfofwzdN6g9v0g
  #         # vercelToken: ${{ secrets.VERCEL_TOKEN }}

  #         name: 

# name: CI/CD con Vercel

# on:
#   push:
#     branches: [main]
#   pull_request:
#     branches: [main]
#     types: [opened, synchronize]

# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout del Repositorio
#         uses: actions/checkout@v2
#         with:
#           fetch-depth: 0

#       - name: Configurar Node.js
#         uses: actions/setup-node@v2
#         with:
#           node-version: '16' 

#       - name: Instalar Dependencias
#         run: npm ci

#       - name: Compilar
#         run: npm run build

#       - name: Implementar en Vercel
#         uses: amondnet/vercel-action@v20
#         with:
#           vercel-token: 1vtMzDfCmcAfofwzdN6g9v0g
#           github-deployment: true

#       - name: Verificación de REPLY
#         run: |
#           REPLY=""
#           read -n 1 -p "Set up and deploy “~/work/proyectoFinal/proyectoFinal”? [Y/n] " < /dev/tty
#           if [[ "${REPLY}" != "y" ]]; then
#             echo "El valor de la variable 'REPLY' no es 'y'."
#             exit 1
#           fi
      
#       - name: Notificar en caso de Fallo
#         if: failure()
#         run: echo "La implementación falló. Verifica los registros del flujo de trabajo para más detalles."

# name: Deploy to Vercel

# on:
#   push:
#     branches: [main]
#   pull_request:
#     branches: [main]
#     types: [opened, synchronize]

# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v3
#       - name: Install dependencies
#         run: npm ci
#       - name: Build
#         run: npm run build
#       - name: Deploy to Vercel
#         uses: vercel/vercel@v3
#         with:
#           token: 1vtMzDfCmcAfofwzdN6g9v0g
#         env:
#           NODE_ENV: production
name: Vercel Production Deployment

on:
  push:
    branches:
      - main

jobs:
  deploy-production:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 14

      - name: Install Dependencies
        run: |
          rm -rf node_modules
          npm install dayjs
          npm ci

      - name: Build Project
        run: npm run build

      - name: Install Vercel CLI
        run: npm install --global vercel@latest

      - name: Authenticate with Vercel
        run: vercel login --token 1vtMzDfCmcAfofwzdN6g9v0g

      - name: Switch to Vercel Project
        run: vercel switch nam --scope=pabloc43

      - name: Pull Vercel Environment Information
        run: vercel pull --yes

      - name: Deploy to Vercel
        run: vercel deploy --prod
