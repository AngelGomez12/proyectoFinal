# name: CI/CD with Vercel

# on:
#   push:
#     branches:
#       - main

# jobs:
#   build:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout Repository
#         uses: actions/checkout@v2

#       - name: Set up Node.js
#         uses: actions/setup-node@v3
#         with:
#           node-version: 14

#       - name: Install Dependencies
#         run: npm install

#       - name: Build
#         run: npm run build

#   deploy:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Deploy to Vercel
#         uses: amondnet/vercel-action@v20
#         with:
#           vercelToken: 1vtMzDfCmcAfofwzdN6g9v0g
#           # vercelToken: ${{ secrets.VERCEL_TOKEN }}

#           name: Deployment Pipeline


# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     steps: 
#       - uses: actions/checkout@v2
#         with:
#           fetch-depth: 0
#       - uses: actions/setup-node@v2
#         with:
#           node-version: '18'
#       - name: Install dependencies
#         run: npm ci
#       #- name: Lint
#       #  run: npm run eslint
#       - name: Build
#         run: npm run build



# name: CI/CD with Vercel

# on:
#   push:
#     branches: [main]
#   pull_request:     
#     branches: [main]
#     types: [opened, synchronize]


# jobs:
#     deploy:
#     runs-on: ubuntu-latest
#     steps: 
#       - uses: actions/checkout@v2
#         with:
#           fetch-depth: 0
#       - uses: actions/setup-node@v2
#         with:
#           node-version: '18'
#       - name: Install dependencies
#         run: npm ci
#       - name: Build
#         run: npm run build
#       - name: Deploy to Vercel
#         uses: amondnet/vercel-action@v20
#         with:
#           vercelToken: 1vtMzDfCmcAfofwzdN6g9v0g
#           name: Maquinaria Pro
#           rollbackonhealthcheckfailed: true




  # deploy:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Deploy to Vercel
  #       uses: amondnet/vercel-action@v20
  #       with:
  #         vercelToken: 1vtMzDfCmcAfofwzdN6g9v0g
  #         # vercelToken: ${{ secrets.VERCEL_TOKEN }}

  #         name: 

nombre: CI/CD con Vercel

en:
  push:
    ramas: [main]
  pull_request:
    ramas: [main]
    tipos: [abierto, sincronizar]

trabajos:
  desplegar:
    se ejecuta en: ubuntu-latest
    pasos:
      - nombre: Checkout del Repositorio
        usa: actions/checkout@v2
        con:
          profundidad de búsqueda: 0

      - nombre: Configurar Node.js
        usa: actions/setup-node@v2
        con:
          versión de nodo: '16'

      - nombre: Instalar Dependencias
        ejecutar: npm ci

      - nombre: Compilar
        ejecutar: npm run build

      - nombre: Implementar en Vercel
        usa: amondnet/vercel-action@v20
        con:
          token de vercel: 1vtMzDfCmcAfofwzdN6g9v0g
          nombre: Maquinaria Pro

      - nombre: Notificar en caso de Fallo
        si: fracaso()
        ejecutar: echo "La implementación falló. Verifica los registros del flujo de trabajo para más detalles."
